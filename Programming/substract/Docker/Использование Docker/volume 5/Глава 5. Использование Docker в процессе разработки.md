Отлично, работаем с **Частью II. Глава 5. Использование Docker в процессе разработки**.

### **Глава 5. Использование Docker в процессе разработки**

#### **1. Традиционное приветствие миру**
**Вопросы для самопроверки:**
*   Какова цель создания простого "Hello World" приложения в контексте Docker?
*   Какие основные шаги необходимо выполнить, чтобы "завернуть" простое веб-приложение (например, на Python/Flask, Node.js/Express) в Docker-контейнер?
*   Как создать `Dockerfile` для этого приложения? Какие инструкции (`FROM`, `WORKDIR`, `COPY`, `RUN`, `CMD`) являются обязательными?
*   Как собрать образ из этого `Dockerfile` и запустить контейнер, чтобы приложение стало доступно с хоста?
*   Что необходимо сделать в `Dockerfile`, чтобы обновления кода приложения (например, изменение файла `app.py`) применялись без полной пересборки всего образа?

**Что я изучил:**
*   Практический цикл разработки с Docker: **написал код -> создал Dockerfile -> собрал образ -> запустил контейнер**.
*   Как структурировать `Dockerfile` для типичного веб-приложения: установка зависимостей, копирование кода, объявление точки входа.
*   Важность правильного порядка инструкций для эффективного использования кэша (зависимости копируются и устанавливаются до кода приложения).
*   Как пробросить порт из контейнера на хост (`-p 80:5000`), чтобы приложение было доступно в браузере.

**Краткие вопросы:**
*   Напишите `Dockerfile` для Node.js приложения, где `package.json` и `app.js` находятся в одной директории. Предположите, что точка входа — `node app.js`.

---

#### **2. Автоматизация с использованием Compose**
**Вопросы для самопроверки:**
*   Что такое Docker Compose и какую проблему он решает?
*   Какой файл конфигурации используется для определения многоконтейнерного приложения в Compose (начиная с версий 2.x и 3.x)?
*   Какие основные секции (ключи верхнего уровня) есть в файле `docker-compose.yml`?
*   Как с помощью Compose определить сеть для взаимодействия сервисов?
*   Как в Compose настроить проброс портов и подключение томов (volumes) для сервиса?

**Что я изучил:**
*   Docker Compose — это инструмент для определения и запуска многоконтейнерных Docker-приложений с помощью одного файла конфигурации (`docker-compose.yml`).
*   Он избавляет от необходимости запоминать и вводить длинные цепочки команд `docker run` с множеством флагов.
*   Основная сущность в Compose — **сервис (service)**, который соответствует одному образу контейнера.
*   Compose автоматически создает общую сеть для всех сервисов в файле, позволяя им взаимодействовать по имени сервиса.

**Краткие вопросы:**
*   Какая команда Compose используется для сборки образов и запуска всех сервисов, описанных в `docker-compose.yml`?

---

#### **3. Порядок работы Compose**
**Вопросы для самопроверки:**
*   Каков базовый workflow (порядок работы) при использовании Docker Compose в разработке?
*   Как пересобрать и перезапустить конкретный сервис после изменения его `Dockerfile` или кода?
*   Как просмотреть логи всех сервисов или одного конкретного сервиса?
*   Как запустить одну команду внутри запущенного контейнера, управляемого Compose (например, выполнить миграции БД)?
*   В чем разница между командами `docker-compose up` и `docker-compose up -d`? А между `docker-compose stop` и `docker-compose down`?

**Что я изучил:**
*   Основные команды Compose CLI:
    *   `docker-compose up` — запуск (сборка при необходимости).
    *   `docker-compose down` — остановка и удаление контейнеров, сетей.
    *   `docker-compose logs` — просмотр логов.
    *   `docker-compose exec` — выполнение команды в работающем контейнере.
    *   `docker-compose ps` — список контейнеров проекта.
*   Команда `docker-compose up --build` принудительно пересобирает образы.
*   Команда `docker-compose down -v` также удаляет тома, созданные Compose (осторожно!).

**Краткие вопросы:**
*   Какой командой в Compose выполнить команду `bash` внутри сервиса с именем `web`?

---

#### **4. Резюме**
*   Вы прошли полный путь от упаковки простого приложения в контейнер до автоматизации запуска сложной многоконтейнерной среды с помощью Docker Compose.
*   Вы понимаете, что `Dockerfile` — это инструкция по созданию образа одного компонента, а `docker-compose.yml` — это "партитура" для оркестровки всех компонентов приложения вместе.
*   Docker Compose кардинально упрощает процесс разработки, делая среду запускаемой одной командой, что обеспечивает консистентность между разными машинами (разработчика, тестера, CI).

---

### **Вопросы для обсуждения после главы**

1.  **Монолиты vs Микросервисы:** Как Docker и, в частности, Docker Compose меняют подход к разработке традиционного монолитного приложения? Способствуют ли они переходу к микросервисной архитектуре или просто улучшают процесс разработки монолита? Аргументируйте.
2.  **Разработка с "горячей перезагрузкой" (Hot-Reload):** При локальной разработке без Docker вы, скорее всего, пользуетесь авто-перезагрузкой сервера при изменении кода. Как организовать подобный механизм (монтирование кода как volume) при разработке с использованием Docker Compose? Опишите необходимые изменения в `docker-compose.yml` и преимущества такого подхода.
3.  **Управление зависимостями:** В примере с "Традиционным приветствием миру" зависимости (библиотеки Python/Node) устанавливаются внутрь образа на этапе сборки. Какие плюсы и минусы у этого подхода? В каком случае может быть полезно монтировать volume не только с кодом, но и с директорией зависимостей (например, `node_modules`)?
4.  **Compose для разных окружений:** Файл `docker-compose.yml` идеально описывает среду для разработки. Какие проблемы могут возникнуть, если попытаться использовать этот же файл без изменений в production (продакшене)? Какие настройки обычно отличаются (пароли, порты, тома, масштабирование) и как можно управлять этими отличиями (несколько compose-файлов, переменные окружения)?
5.  **Интеграция с инструментами:** Как Docker Compose интегрируется в процесс Continuous Integration (CI)? Какую роль он может играть на этапах сборки, тестирования и развертывания приложения?